<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rizin Summer of Code 2021 Summary | Rizin</title><meta name=keywords content="rizin,cutter,rsoc"><meta name=description content="Rizin Summer of Code 2021 Summary RSoC 2021 is officially finished and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.
Basstorm: Types analysis Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the Type module.
At first, I fixed several bugs in the new tree-sitter based type parser."><meta name=author content="xvilka"><link rel=canonical href=https://rizin.re/posts/rsoc-2021-summary/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://rizin.re/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rizin.re/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rizin.re/favicon-32x32.png><link rel=apple-touch-icon href=https://rizin.re/apple-touch-icon.png><link rel=mask-icon href=https://rizin.re/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet><link rel=stylesheet href=https://rizin.re/css/custom/rizin.min.f00018437c0f0fe081c2a5ccdb294666c6f0adc5f7ca5ce6f622496f40fc88ac.css><meta property="og:title" content="Rizin Summer of Code 2021 Summary"><meta property="og:description" content="Rizin Summer of Code 2021 Summary RSoC 2021 is officially finished and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.
Basstorm: Types analysis Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the Type module.
At first, I fixed several bugs in the new tree-sitter based type parser."><meta property="og:type" content="article"><meta property="og:url" content="https://rizin.re/posts/rsoc-2021-summary/"><meta property="og:image" content="https://rizin.re/images/rizin_preview.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-27T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-27T00:00:00+00:00"><meta property="og:site_name" content="Rizin"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rizin.re/images/rizin_preview.png"><meta name=twitter:title content="Rizin Summer of Code 2021 Summary"><meta name=twitter:description content="Rizin Summer of Code 2021 Summary RSoC 2021 is officially finished and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.
Basstorm: Types analysis Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the Type module.
At first, I fixed several bugs in the new tree-sitter based type parser."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://rizin.re/posts/"},{"@type":"ListItem","position":2,"name":"Rizin Summer of Code 2021 Summary","item":"https://rizin.re/posts/rsoc-2021-summary/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rizin Summer of Code 2021 Summary","name":"Rizin Summer of Code 2021 Summary","description":"Rizin Summer of Code 2021 Summary RSoC 2021 is officially finished and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.\nBasstorm: Types analysis Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the Type module.\nAt first, I fixed several bugs in the new tree-sitter based type parser.","keywords":["rizin","cutter","rsoc"],"articleBody":"Rizin Summer of Code 2021 Summary RSoC 2021 is officially finished and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.\nBasstorm: Types analysis Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the Type module.\nAt first, I fixed several bugs in the new tree-sitter based type parser. The new type parser brings us the ability to parse a C type defined as a string. After that, I migrated the type constraints from RzAnalysis to the new RzType module, which makes the type constraints management easier.\n[0x00000530]\u003e e analysis.types.constraint=true [0x00000530]\u003e aaa [x] Analyze all flags starting with sym. and entry0 (aa) [x] Analyze function calls (aac) [x] Analyze len bytes of instructions for references (aar) [x] Check for classes [x] Type matching analysis for all functions (aaft) [x] Propagate noreturn information [x] Use -AA or aaaa to perform additional experimental analysis. [0x00000530]\u003e s sym.range_small [0x0000063a]\u003e pdf ; CALL XREF from main @ 0x720 / sym.range_small (int64_t arg1); | ; var int64_t var_14h { \u003e 0x0 \u0026\u0026 \u003c= 0x9} @ rbp-0x14 ;constraint | ; var int64_t var_8h @ rbp-0x8 | ; var int64_t var_4h { } @ rbp-0x4 | ; arg int64_t arg1 @ rdi | 0x0000063a push rbp | 0x0000063b mov rbp, rsp | 0x0000063e sub rsp, 0x20 | 0x00000642 mov dword [var_14h], edi ; arg1 For historical reasons, Rizin has never had support for global variables, which means we can’t identify and set a certain global variable, which is detrimental to our analysis. I have added support for global variables so that we can easily manipulate a global variable from the command line.\n[0x00000000]\u003e avg? Usage: avg[jadmnt] # Global variables | avg[j] [] # show global variables | avga # add global variable manually | avgd # delete the global variable at the addr | avgm # delete global variable with name | avgn # rename the global variable | avgt # change the global variable type [0x00000000]\u003e avga foo 0x100 char [0x00000000]\u003e avg global char foo @ 0x100 [0x00000000]\u003e avgt foo int [0x00000000]\u003e avg global int foo @ 0x100 [0x00000000]\u003e In addition, I completely refactored PDB Parser to make it better cross-platform. Previously, PDB Parser had a lot of problems with its functionality, such as missing information, parsing errors, and unused types. All these problems are solved in this refactoring.\n$ rizin Project1.exe -- Use scr.accel to browse the file faster! [0x00401703]\u003e idpi ./Project1.pdb ········· struct std::_Char_traits { char32_t char_type; uint32_t int_type; int64_t off_type; char32_t copy(char32_t * arg0, const char32_t * arg1, const uint32_t arg2); char32_t _Copy_s(char32_t * arg0, const uint32_t arg1, const char32_t * arg2, const uint32_t arg3); char32_t move(char32_t * arg0, const char32_t * arg1, const uint32_t arg2); int32_t compare(const char32_t * arg0, const char32_t * arg1, uint32_t arg2); uint32_t length(const char32_t * arg0); const char32_t * find(const char32_t * arg0, uint32_t arg1, const char32_t * arg2); bool eq(const char32_t * arg0, const char32_t * arg1); bool lt(const char32_t * arg0, const char32_t * arg1); char32_t to_char_type(const uint32_t * arg0); uint32_t to_int_type(const char3_t * arg0); bool eq_int_type(const uint32_t * arg0, const uint32_t * arg1); uint32_t not_eof(const uint32_t * arg0); uint32_t eof(); } ········· [0x00401703]\u003e tuc ········· union __m64 { uint64_t m64_u64; float m64_f32[8]; unsigned char m64_i8[8]; int16_t m64_i16[8]; int32_t m64_i32[8]; int64_t m64_i64; unsigned char m64_u8[8]; uint16_t m64_u16[8]; uint32_t m64_u32[8]; }; ········· Currently, Heersin has completed the new RzIL, but it still lacks support for many architectures. So I am now porting the 8051 architecture from the old ESIL to the new RzIL, and I will be working with Heersin to port more architectures to the new IL afterwards.\nDuring this RSoC, I grew a lot and learned a lot of development skills that I would not normally be exposed to. I would like to especially thank my mentor Anton Kochkov for his selfless help. I would also like to thank all the community members for their help!\nHeersin: New Rizin IL Hi, I’m Heersin, I particpated in RSoC this summer to introduce a new Intermediate Language and refactor ESIL related code. Rizin previously used ESIL(a stack-based IL) as its IL to analyse binary. In fact, ESIL is neither user friendly nor developer friendly, those are some of the reasons that led to this work. We take BAP’s Core Theory as our new IL. Because it’s designed to be similar to SMT, and it may be the latest IL (the most “fashionable” one) we can trust for now.\nIn the first few days, I didn’t have any clue about implementing a Core Theory VM, so I started to work on the some basic data structures (Bool/BitVector/Array) used in VM. They are basic types in core theory, we can emulate other types (ut8/ut16/ut32/ut64) by using bitvector and bool.\nAfter that, I focused on the concepts in VM and the execution procedure. In short, there are Variable and Value in the Core Theory VM. A Variable is a symbol while a Value represents the evaluating result of an expression. read register is used to get the value of a variable and write register is used to assign a value to a variable. Memory is a Hashtable (kv-map), where the address is the key and the data is the value. The Memory concept is similar to the SMT Arrays theory where both values and indexes are Bitvectors.\nThen, I uplifted the brainfuck to test the new IL. That’s the uplifted expression.\n# print mode # ++++++++++[\u003e+++++++\u003e++++++++++\u003e+++\u003e+\u003c\u003c\u003c\u003c-]\u003e++.\u003e+.+++++++..+++.\u003e++.\u003c\u003c+++++++++++++++.\u003e.+++.------.--------.\u003e+.\u003e. (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (BRANCH (LOAD (VAR ptr)) (GOTO ]0)) (SET ptr (ADD (VAR ptr) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) ... (SET ptr (SUB (VAR ptr) (INT 1))) (STORE (VAR ptr) (SUB (LOAD (VAR ptr)) (INT 1))) (BRANCH (INV (LOAD (VAR ptr))) (GOTO [0)) (SET ptr (ADD (VAR ptr) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (GOTO write) (SET ptr (ADD (VAR ptr) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (GOTO write) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) ... (GOTO write) (SET ptr (ADD (VAR ptr) (INT 1))) (STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1))) (GOTO write) (SET ptr (ADD (VAR ptr) (INT 1))) (GOTO write) Next step is to integrate new IL with Rizin, and porting analysis_bf to use it. The analysis code is huge and ESIL is tightly integrated within it. I removed some dead code and reorganized the directory structure with the help from community members. Moreover, I added new structures for the trace and stat (they are used to collect info about reg/mem read/write) to replace the sdb approach with vectors and make it easier to understand. Then I continued to integrate the new IL; added aezi and aezs commands for init VM and step emulate respectively.\n[0x00000000]\u003e aezi [0x00000000]\u003e aezs 390 Hello World! [0x00000000]\u003e aezi Porting more architectures will be a huge work. I will continue to contribute to rizin and improve the IL part.\nI am grateful for such an opportunity to participate in RSoC and contribute to Rizin. There is a friendly atmosphere and I learned a lot. I want to give special thanks to my mentor XVilka for his guidance and help, and also to ret2libc, Ivg, Wargio, Pelijah, Thestr4ng3r and 08A for answering my questions and giving feedback on my PRs.\n","wordCount":"1344","inLanguage":"en","datePublished":"2021-09-27T00:00:00Z","dateModified":"2021-09-27T00:00:00Z","author":{"@type":"Person","name":"xvilka"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rizin.re/posts/rsoc-2021-summary/"},"publisher":{"@type":"Organization","name":"Rizin","logo":{"@type":"ImageObject","url":"https://rizin.re/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>.theme-toggle{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://rizin.re/ accesskey=h>Rizin</a>
<span class=logo-switches><span class=theme-toggle><a id=theme-toggle accesskey=t title="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://rizin.re/posts/ target><span>Blog</span></a></li><li><a href=https://rizin.re/organization/ target><span>Organization</span></a></li><li><a href=https://rizin.re/community/ target><span>Community</span></a></li><li><a href=https://rizin.re/gsoc/ target><span>GSoC</span></a></li><li><a href=https://cutter.re target=_blank><span>Cutter</span></a></li><li><a href=https://github.com/rizinorg/rizin target=_blank><i class="lni lni-github-original"></i>
<span>Source</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rizin.re/>Home</a>&nbsp;»&nbsp;<a href=https://rizin.re/posts/>Posts</a></div><h1 class=post-title>Rizin Summer of Code 2021 Summary</h1><div class=post-meta><span title='2021-09-27 00:00:00 +0000 UTC'>September 27, 2021</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;xvilka</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rizin-summer-of-code-2021-summary aria-label="Rizin Summer of Code 2021 Summary">Rizin Summer of Code 2021 Summary</a></li><li><a href=#basstorm-types-analysis aria-label="Basstorm: Types analysis">Basstorm: Types analysis</a></li><li><a href=#heersin-new-rizin-il aria-label="Heersin: New Rizin IL">Heersin: New Rizin IL</a></li></ul></div></details></div><div class=post-content><h1 id=rizin-summer-of-code-2021-summary>Rizin Summer of Code 2021 Summary<a hidden class=anchor aria-hidden=true href=#rizin-summer-of-code-2021-summary>#</a></h1><p><a href=https://rizin.re/posts/rsoc-2021-announcement/>RSoC 2021</a> is <a href=https://keenlab.tencent.com/zh/2021/08/24/2021-rsoc-summary/>officially finished</a> and we are happy to congratulate both participants for passing the program and completing the most important parts of their tasks.</p><h1 id=basstorm-types-analysis>Basstorm: Types analysis<a hidden class=anchor aria-hidden=true href=#basstorm-types-analysis>#</a></h1><p>Hello, I am Basstorm. Over the past two months, I had a fulfilling summer as one of the participants of RSoC. The main subject of RSoC was to improve the <code>Type</code> module.</p><p>At first, I fixed several bugs in the new <code>tree-sitter</code> based type parser. The new type parser brings us the ability to parse a C type defined as a string. After that, I migrated the type constraints from RzAnalysis to the new RzType module, which makes the type constraints management easier.</p><pre tabindex=0><code>[0x00000530]&gt; e analysis.types.constraint=true
[0x00000530]&gt; aaa
[x] Analyze all flags starting with sym. and entry0 (aa)
[x] Analyze function calls (aac)
[x] Analyze len bytes of instructions for references (aar)
[x] Check for classes
[x] Type matching analysis for all functions (aaft)
[x] Propagate noreturn information
[x] Use -AA or aaaa to perform additional experimental analysis.
[0x00000530]&gt; s sym.range_small
[0x0000063a]&gt; pdf
            ; CALL XREF from main @ 0x720
/ sym.range_small (int64_t arg1);
|           ; var int64_t var_14h  { &gt; 0x0 &amp;&amp; &lt;= 0x9} @ rbp-0x14       ;constraint
|           ; var int64_t var_8h @ rbp-0x8
|           ; var int64_t var_4h  { } @ rbp-0x4
|           ; arg int64_t arg1 @ rdi
|           0x0000063a      push  rbp
|           0x0000063b      mov   rbp, rsp
|           0x0000063e      sub   rsp, 0x20
|           0x00000642      mov   dword [var_14h], edi                 ; arg1
</code></pre><p>For historical reasons, Rizin has never had support for global variables, which means we can&rsquo;t identify and set a certain global variable, which is detrimental to our analysis. I have added support for global variables so that we can easily manipulate a global variable from the command line.</p><pre tabindex=0><code>[0x00000000]&gt; avg?
Usage: avg[jadmnt]   # Global variables
| avg[j] [&lt;var_name&gt;]             # show global variables
| avga &lt;var_name&gt; &lt;addr&gt; &lt;type&gt;   # add global variable manually
| avgd &lt;addr&gt;                     # delete the global variable at the addr
| avgm &lt;name&gt;                     # delete global variable with name
| avgn &lt;old_var_name&gt; &lt;new_var_name&gt; # rename the global variable
| avgt &lt;var_name&gt; &lt;type&gt;          # change the global variable type
[0x00000000]&gt; avga foo 0x100 char
[0x00000000]&gt; avg
global char foo @ 0x100
[0x00000000]&gt; avgt foo int
[0x00000000]&gt; avg
global int foo @ 0x100
[0x00000000]&gt;
</code></pre><p>In addition, I completely refactored <a href=https://github.com/rizinorg/rizin/pull/1517>PDB Parser</a> to make it better cross-platform. Previously, PDB Parser had a lot of problems with its functionality, such as missing information, parsing errors, and unused types. All these problems are solved in this refactoring.</p><pre tabindex=0><code>$ rizin Project1.exe
 -- Use scr.accel to browse the file faster!
[0x00401703]&gt; idpi ./Project1.pdb
·········
struct std::_Char_traits&lt;char32_t,unsigned int&gt; {
        char32_t char_type;
        uint32_t int_type;
        int64_t off_type;
        char32_t copy(char32_t * arg0, const char32_t * arg1, const uint32_t arg2);
        char32_t _Copy_s(char32_t * arg0, const uint32_t arg1, const char32_t * arg2, const uint32_t arg3);
        char32_t move(char32_t * arg0, const char32_t * arg1, const uint32_t arg2);
        int32_t compare(const char32_t * arg0, const char32_t * arg1, uint32_t arg2);
        uint32_t length(const char32_t * arg0);
        const char32_t * find(const char32_t * arg0, uint32_t arg1, const char32_t * arg2);
        bool eq(const char32_t * arg0, const char32_t * arg1);
        bool lt(const char32_t * arg0, const char32_t * arg1);
        char32_t to_char_type(const uint32_t * arg0);
        uint32_t to_int_type(const char3_t * arg0);
        bool eq_int_type(const uint32_t * arg0, const uint32_t * arg1);
        uint32_t not_eof(const uint32_t * arg0);
        uint32_t eof();
 }
·········
[0x00401703]&gt; tuc
·········
union __m64 {
        uint64_t m64_u64;
        float m64_f32[8];
        unsigned char m64_i8[8];
        int16_t m64_i16[8];
        int32_t m64_i32[8];
        int64_t m64_i64;
        unsigned char m64_u8[8];
        uint16_t m64_u16[8];
        uint32_t m64_u32[8];
};
·········
</code></pre><p>Currently, Heersin has completed the new <a href=https://github.com/rizinorg/rizin/pull/1663>RzIL</a>, but it still lacks support for many architectures. So I am now <a href=https://github.com/rizinorg/rizin/pull/1609>porting the 8051 architecture</a> from the old ESIL to the new RzIL, and I will be working with Heersin to port more architectures to the new IL afterwards.</p><p>During this RSoC, I grew a lot and learned a lot of development skills that I would not normally be exposed to. I would like to especially thank my mentor Anton Kochkov for his selfless help. I would also like to thank all the community members for their help!</p><h1 id=heersin-new-rizin-il>Heersin: New Rizin IL<a hidden class=anchor aria-hidden=true href=#heersin-new-rizin-il>#</a></h1><p>Hi, I&rsquo;m Heersin, I particpated in RSoC this summer to introduce a new Intermediate Language and refactor ESIL related code. Rizin previously used ESIL(<a href=https://book.rizin.re/disassembling/esil.html>a stack-based IL</a>) as its IL to analyse binary. In fact, ESIL is neither user friendly nor developer friendly, those are some of the reasons that led to this work. We take <a href=http://binaryanalysisplatform.github.io/bap/api/odoc/bap-core-theory/Bap_core_theory/index.html>BAP&rsquo;s Core Theory</a> as our new IL. Because it&rsquo;s designed to be similar to SMT, and it may be the latest IL (the most &ldquo;fashionable&rdquo; one) we can trust for now.</p><p>In the first few days, I didn&rsquo;t have any clue about implementing a Core Theory VM, so I started to work on the some basic data structures (<strong>Bool</strong>/<strong>BitVector</strong>/<strong>Array</strong>) used in VM. They are basic types in core theory, we can emulate other types (<code>ut8</code>/<code>ut16</code>/<code>ut32</code>/<code>ut64</code>) by using bitvector and bool.</p><p>After that, I focused on the concepts in VM and the execution procedure. In short, there are <strong>Variable</strong> and <strong>Value</strong> in the Core Theory VM. A <strong>Variable</strong> is a symbol while a <strong>Value</strong> represents the evaluating result of an expression. <code>read register</code> is used to get the value of a variable and <code>write register</code> is used to assign a value to a variable. <strong>Memory</strong> is a Hashtable (kv-map), where the address is the key and the data is the value. The <strong>Memory</strong> concept is similar to the SMT Arrays theory where both values and indexes are <strong>Bitvectors</strong>.</p><p>Then, I uplifted the brainfuck to test the new IL. That&rsquo;s the uplifted expression.</p><pre tabindex=0><code># print mode
# ++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]&gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;.+++.------.--------.&gt;+.&gt;.
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(BRANCH (LOAD (VAR ptr)) &lt;NOP&gt; (GOTO ]0))
(SET ptr (ADD (VAR ptr) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
...
(SET ptr (SUB (VAR ptr) (INT 1)))
(STORE (VAR ptr) (SUB (LOAD (VAR ptr)) (INT 1)))
(BRANCH (INV (LOAD (VAR ptr))) &lt;NOP&gt; (GOTO [0))
(SET ptr (ADD (VAR ptr) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(GOTO write)
(SET ptr (ADD (VAR ptr) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(GOTO write)
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
...
(GOTO write)
(SET ptr (ADD (VAR ptr) (INT 1)))
(STORE (VAR ptr) (ADD (LOAD (VAR ptr)) (INT 1)))
(GOTO write)
(SET ptr (ADD (VAR ptr) (INT 1)))
(GOTO write)
</code></pre><p>Next step is to integrate new IL with Rizin, and porting <code>analysis_bf</code> to use it. The analysis code is huge and ESIL is tightly integrated within it. I removed some dead code and reorganized the directory structure with the help from community members. Moreover, I added new structures for the <code>trace</code> and <code>stat</code> (they are used to collect info about reg/mem read/write) to replace the <code>sdb</code> approach with vectors and make it easier to understand. Then I continued to integrate the new IL; added <code>aezi</code> and <code>aezs</code> commands for <code>init VM</code> and <code>step emulate</code> respectively.</p><pre tabindex=0><code>[0x00000000]&gt; aezi
[0x00000000]&gt; aezs 390
Hello World!
[0x00000000]&gt; aezi
</code></pre><p>Porting more architectures will be a huge work. I will continue to contribute to rizin and improve the IL part.</p><p>I am grateful for such an opportunity to participate in RSoC and contribute to Rizin. There is a friendly atmosphere and I learned a lot. I want to give special thanks to my mentor XVilka for his guidance and help, and also to ret2libc, Ivg, Wargio, Pelijah, Thestr4ng3r and 08A for answering my questions and giving feedback on my PRs.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://rizin.re/tags/rizin/>rizin</a></li><li><a href=https://rizin.re/tags/cutter/>cutter</a></li><li><a href=https://rizin.re/tags/rsoc/>rsoc</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on twitter" href="https://twitter.com/intent/tweet/?text=Rizin%20Summer%20of%20Code%202021%20Summary&amp;url=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f&amp;hashtags=rizin%2ccutter%2crsoc"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f&amp;title=Rizin%20Summer%20of%20Code%202021%20Summary&amp;summary=Rizin%20Summer%20of%20Code%202021%20Summary&amp;source=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f&title=Rizin%20Summer%20of%20Code%202021%20Summary"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on whatsapp" href="https://api.whatsapp.com/send?text=Rizin%20Summer%20of%20Code%202021%20Summary%20-%20https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Rizin Summer of Code 2021 Summary on telegram" href="https://telegram.me/share/url?text=Rizin%20Summer%20of%20Code%202021%20Summary&amp;url=https%3a%2f%2frizin.re%2fposts%2frsoc-2021-summary%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://rizin.re/>Rizin</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><script defer src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById("menu").scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById("menu").scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>